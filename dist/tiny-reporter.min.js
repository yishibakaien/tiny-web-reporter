!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).tReporter=t()}(this,(function(){"use strict";var e=new(function(){function e(){this.value=[]}return e.prototype.push=function(e){this.value.push(e)},e.prototype.get=function(){return this.value},e.prototype.clear=function(){this.value=[]},e}()),t=function(t,n){var r,i;i=n,(r=t).recordType||(r.recordType=i),r.uuid||(r.uuid="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()>>>0;return("x"===e?t:(3&t)>>>8).toString(16)}))),r.recordTime||(r.recordTime=+new Date),e.push(t);var o=e.value;if(o.length>=10)return o},n=function(){return setTimeout((function(){return t(function(){var e=window.performance.getEntriesByType("navigation")[0].toJSON();for(var t in e)"number"==typeof e[t]&&(e[t]=Math.ceil(e[t]));return e}(),"performance")}),300)};return function(r){var i=r.key,o=r.url,u=r.isPerformance,a=void 0===u||u,c=r.isDevice,d=void 0===c||c;if(!i)throw new Error("params error: `key` is required");if(!o)throw new Error("params error: `url` is required");!function(t){document.addEventListener("visibilitychange",(function(){if("hidden"===document.visibilityState){if(!e.value.length)return;var n=JSON.stringify(e.value);console.log("1234",n),navigator.sendBeacon(t,n),e.clear()}}))}(o),d&&function(){var e,n,r,i,o,u;t((e=window.screen,r=(n=document.documentElement).clientWidth,i=n.clientHeight,o=e.width,u=e.height,{clientHeight:i,clientWidth:r,colorDepth:e.colorDepth,pixelDepth:e.pixelDepth,screenWidth:o,screenHeight:u,language:navigator.language,userAgent:navigator.userAgent,vendor:navigator.vendor,platform:navigator.platform}),"device")}(),a&&window.addEventListener("load",n,!1)}}));
//# sourceMappingURL=tiny-reporter.min.js.map
